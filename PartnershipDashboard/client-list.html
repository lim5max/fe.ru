<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Список клиентов - FE Платформа</title>
    <link href="../styles.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Header Web Component -->
    <script src="../components/fe-header-partnership.js"></script>
  </head>
  <body class="bg-base-surface-1 font-sans">
    <!-- Main Container / Главный контейнер -->
    <div class="min-h-screen flex">
      <!-- Sidebar / Боковая панель -->
      <div id="sidebar-container" class="hidden lg:block"></div>

      <!-- Main Content Area / Основная область контента -->
      <div class="flex flex-col grow w-full">
        <!-- Header / Заголовок -->
        <fe-header-partnership></fe-header-partnership>

        <!-- Page Content / Содержимое страницы -->
        <div
          class="bg-base-surface-1 flex flex-col gap-2.5 grow pt-14 px-6 lg:px-11 w-full shadow-[0.5px_1.5px_7px_0px_rgba(26,26,26,0.08)]"
        >
          <div class="flex flex-col gap-6 items-center justify-start w-full">
            <!-- Page Container / Контейнер страницы -->
            <div class="flex flex-col gap-6 items-start w-full max-w-[544px]">
              <!-- Page Title / Заголовок страницы -->
              <div class="flex flex-col gap-3 items-start w-full">
                <h1 class="text-2xl-semibold text-black">Список клиентов</h1>
              </div>

              <!-- Search and Table Section / Секция поиска и таблицы -->
              <div class="flex flex-col gap-5 items-start w-full">
                <!-- Search Input / Поле поиска -->
                <div
                  class="flex flex-col gap-2.5 items-start justify-center min-h-[44px] w-full"
                >
                  <div
                    class="bg-base-surface-1 border border-base-border rounded-6 flex gap-1 h-15 items-center pl-4 pr-3 py-0 w-full focus-within:border-state-brand-active transition-colors"
                  >
                    <!-- Search Icon / Иконка поиска -->
                    <div class="shrink-0 w-6 h-6">
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
                          stroke="rgba(26, 26, 26, 0.7)"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                    </div>
                    <!-- Search Input Field / Поле ввода поиска -->
                    <input
                      type="text"
                      placeholder="Поиск по имени, почте, id..."
                      class="flex-1 text-base-medium text-text-dark-secondary placeholder:text-text-dark-secondary bg-transparent border-none outline-none focus:ring-0"
                    />
                  </div>
                </div>

                <!-- Client Table Desktop / Таблица клиентов Desktop -->
                <div
                  class="border border-base-border rounded-6 w-full overflow-hidden hidden md:block"
                >
                  <!-- Table Header / Заголовок таблицы -->
                  <div class="flex items-center w-full">
                    <div
                      class="flex-1 bg-base-surface-2 text-left px-7 pt-4 pb-3 text-base-medium text-text-dark-secondary border-b border-base-border"
                    >
                      <p class="text-base-medium text-text-dark-secondary">
                        ID
                      </p>
                    </div>
                    <div
                      class="flex-1 bg-base-surface-2 text-left px-4 pt-4 pb-3 text-base-medium text-text-dark-secondary border-b border-base-border"
                    >
                      <p class="text-base-medium text-text-dark-secondary">
                        Клиент
                      </p>
                    </div>
                  </div>

                  <!-- Table Rows Container / Контейнер для строк таблицы -->
                  <div id="client-table-body"></div>
                </div>

                <!-- Client Table Mobile / Таблица клиентов Mobile -->
                <div
                  id="client-table-mobile"
                  class="flex flex-col gap-3 w-full md:hidden"
                >
                  <!-- Mobile cards will be rendered here / Мобильные карточки будут отрендерены здесь -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript / Скрипты -->
    <script>
      // Данные клиентов / Client Data
      const clientsData = [
        { id: "14142141", name: "Андрей Константинопольский" },
        { id: "4124124", name: "Олег Зуев" },
        { id: "5325325", name: "Лев Брадо" },
        { id: "325325", name: "Павел Волен" },
        { id: "23523535", name: "Иван Иванов" },
        { id: "3252332", name: "Иван Романов" },
      ];

      // Render Desktop Table / Рендеринг десктопной таблицы
      function renderClientTable(clients) {
        const tableBody = document.getElementById("client-table-body");
        if (!tableBody) return;

        tableBody.innerHTML = clients
          .map(
            (client) => `
          <div class="flex items-center w-full client-row" data-id="${
            client.id
          }" data-name="${client.name.toLowerCase()}">
            <div class="flex-1 bg-base-surface-1 border-b border-base-border px-7 py-2 h-[52px] flex items-center min-w-0">
              <p class="text-sm-medium text-text-dark-secondary truncate">
                ${client.id}
              </p>
            </div>
            <div class="flex-1 bg-base-surface-1 border-b border-base-border px-3 py-2 h-[52px] flex items-center min-w-0">
              <a href="#" class="text-sm-medium text-state-brand-active hover:underline truncate">
                ${client.name}
              </a>
            </div>
          </div>
        `
          )
          .join("");
      }

      // Render Mobile Table / Рендеринг мобильной таблицы
      function renderClientTableMobile(clients) {
        const tableMobile = document.getElementById("client-table-mobile");
        if (!tableMobile) return;

        tableMobile.innerHTML = clients
          .map(
            (client) => `
          <div class="bg-white border border-base-border rounded-6 p-4 flex flex-col gap-3 client-row-mobile" data-id="${
            client.id
          }" data-name="${client.name.toLowerCase()}">
            <div class="flex items-center justify-between">
              <span class="text-sm-medium text-text-dark-secondary">ID:</span>
              <span class="text-sm-medium text-text-dark-primary">${
                client.id
              }</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm-medium text-text-dark-secondary">Клиент:</span>
              <a href="#" class="text-sm-medium text-state-brand-active hover:underline">
                ${client.name}
              </a>
            </div>
          </div>
        `
          )
          .join("");
      }

      // Search functionality / Функционал поиска
      function initSearch() {
        const searchInput = document.querySelector('input[type="text"]');
        if (!searchInput) return;

        searchInput.addEventListener("input", function (e) {
          const searchTerm = e.target.value.toLowerCase();
          const desktopRows = document.querySelectorAll(".client-row");
          const mobileRows = document.querySelectorAll(".client-row-mobile");

          // Filter desktop rows
          desktopRows.forEach((row) => {
            const id = row.dataset.id.toLowerCase();
            const name = row.dataset.name;

            if (id.includes(searchTerm) || name.includes(searchTerm)) {
              row.style.display = "flex";
            } else {
              row.style.display = "none";
            }
          });

          // Filter mobile rows
          mobileRows.forEach((row) => {
            const id = row.dataset.id.toLowerCase();
            const name = row.dataset.name;

            if (id.includes(searchTerm) || name.includes(searchTerm)) {
              row.style.display = "flex";
            } else {
              row.style.display = "none";
            }
          });
        });
      }

      // Load Components / Загрузка компонентов
      async function loadComponent(containerId, componentPath) {
        try {
          const response = await fetch(componentPath);
          const html = await response.text();
          document.getElementById(containerId).innerHTML = html;
        } catch (error) {
          console.error(`Error loading component ${componentPath}:`, error);
        }
      }

      // Initialize / Инициализация
      document.addEventListener("DOMContentLoaded", async function () {
        // Load sidebar
        await loadComponent(
          "sidebar-container",
          "../components/sidebar-partnership.html"
        );

        // Render desktop and mobile tables with client data
        renderClientTable(clientsData);
        renderClientTableMobile(clientsData);

        // Initialize search
        initSearch();
      });
    </script>
  </body>
</html>
