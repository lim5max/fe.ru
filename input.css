@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables from Tailwind Config / CSS переменные из конфига Tailwind */
/* Эти переменные доступны везде, включая Shadow DOM веб-компонентов */
@layer base {
  :root {
    /* Base Colors / Базовые цвета */
    --color-base-surface-1: #ffffff;
    --color-base-surface-2: #fafaf9;
    --color-base-fill-1: #f5f5f4;
    --color-base-fill-2: #e7e5e4;
    --color-base-fill-3: #d6d3d1;
    --color-base-fill-4: #a8a29f;
    --color-base-fill-5: #56524e;
    --color-base-border: #e7e5e4;
    --color-base-disabled: #1a1a1a2e;

    /* Text Colors / Цвета текста */
    --color-text-dark-primary: #1a1a1a;
    --color-text-dark-secondary: #1a1a1ab2;
    --color-text-dark-tertiary: #1a1a1a5c;
    --color-text-light-primary: #ffffff;

    /* State Brand Colors / Цвета брендового состояния */
    --color-state-brand-hover: #f67416;
    --color-state-brand-active: #e4570c;
    --color-state-brand-selected: #fb923c;

    /* State Danger Colors / Цвета состояния опасности */
    --color-state-danger-hover: #fb657c;
    --color-state-danger-active: #cb1a41;
    --color-state-danger-selected: #fec3ca;

    /* Badge Status Colors / Цвета статусов бейджей */
    --color-state-success-active: #0C887E;
    --color-state-highlight-active: #8318E7;
    --color-state-error-active: #DC2626;

    /* Alpha Colors / Альфа-цвета */
    --color-alpha-dark-50: #1a1a1a14;
    --color-alpha-dark-100: #1a1a1a1f;
    --color-alpha-dark-200: #1a1a1a2e;
    --color-alpha-dark-300: #1a1a1a42;
    --color-alpha-light-200: #ffffff2e;

    /* Spacing / Отступы */
    --spacing-0: 0px;
    --spacing-3: 4px;
    --spacing-5: 8px;
    --spacing-7: 12px;
    --spacing-8: 16px;
    --spacing-9: 20px;
    --spacing-10: 24px;
    --spacing-11: 28px;
    --spacing-12: 32px;
    --spacing-13: 36px;
    --spacing-14: 40px;
    --spacing-15: 44px;
    --spacing-16: 48px;
    --spacing-17: 56px;
    --spacing-18: 64px;
    --spacing-20: 80px;
    --spacing-21: 96px;

    /* Border Radius / Радиусы границ */
    --radius-3: 4px;
    --radius-5: 8px;
    --radius-6: 18px;
    --radius-7: 12px;
    --radius-8: 16px;
    --radius-9: 20px;
    --radius-10: 24px;
    --radius-15: 44px;
    --radius-18: 64px;
    --radius-20: 80px;
    --radius-21: 96px;

    /* Font Family / Семейство шрифтов */
    --font-sans: "Inter Variable", "Inter", system-ui, sans-serif;
  }

  html {
    font-family: var(--font-sans);
  }

  body {
    @apply text-text-dark-primary bg-base-surface-1;
  }
}

/* Component styles */
@layer components {
  /* Button styles */
  .btn-primary {
    @apply bg-state-brand-selected hover:bg-state-brand-hover active:bg-state-brand-active;
    @apply text-text-light-primary font-semibold shadow-sm hover:shadow-md active:shadow-xs;
    @apply px-4 py-2 rounded-8 transition-all duration-200;
  }

  .btn-danger {
    @apply bg-state-danger-selected hover:bg-state-danger-hover active:bg-state-danger-active;
    @apply text-text-light-primary font-semibold;
    @apply px-4 py-2 rounded-6 transition-colors duration-200;
  }

  /* Card styles */
  .card {
    @apply bg-base-surface-1 border border-base-border rounded-6;
    @apply shadow-sm;
  }

  .card-elevated {
    @apply bg-base-surface-1 border border-base-border rounded-6;
    @apply shadow-md;
  }

  .card-floating {
    @apply bg-base-surface-1 border border-base-border rounded-6;
    @apply shadow-lg;
  }

  /* Glass effect styles */
  .glass-light {
    @apply bg-alpha-light-200 backdrop-blur-6 border border-alpha-dark-100;
    @apply rounded-6;
  }

  .glass-dark {
    @apply bg-alpha-dark-200 backdrop-blur-6 border border-alpha-dark-300;
    @apply rounded-6;
  }

  /* Overlay styles */
  .overlay-light {
    @apply bg-alpha-dark-200 backdrop-blur-4;
  }

  .overlay-dark {
    @apply bg-alpha-dark-300 backdrop-blur-4;
  }

  /* Input styles */
  .input {
    @apply bg-base-surface-1 border border-base-border rounded-8;
    @apply px-3 py-2 text-text-dark-primary;
    @apply focus:outline-none focus:border-state-brand-selected;
  }

  .input:disabled {
    @apply bg-base-disabled cursor-not-allowed;
  }
}

/* Override Tailwind Forms focus styles */
@layer components {
  /* Fix all input types and textarea focus to use orange instead of blue */
  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="tel"]:focus,
  input[type="date"]:focus,
  input[type="search"]:focus,
  textarea:focus {
    --tw-ring-color: #e4570c !important; /* state-brand-active */
    --tw-ring-offset-shadow: 0 0 #0000 !important;
    --tw-ring-shadow: 0 0 #0000 !important;
    border-color: #e4570c !important; /* state-brand-active */
    box-shadow: none !important;
    outline: none !important;
  }

  /* Domain input with prefix - apply focus to parent container */
  #domain-name:focus {
    border-color: transparent !important;
    outline: none !important;
  }
}

/* Custom utility classes */
@layer utilities {
  .icon-md {
    width: 20px;
    height: 20px;
  }

  .icon-lg {
    width: 24px;
    height: 24px;
  }

  .icon-xl {
    width: 28px;
    height: 28px;
  }

  .icon-2xl {
    width: 32px;
    height: 32px;
  }

  /* Grid.js Figma Design Styles */
  .gridjs-container-figma {
    border: none;
    border-radius: 0;
    overflow: visible;
    box-shadow: none;
    background: transparent;
    margin: 0 !important;
    padding: 0 !important;
  }

  .gridjs-table-figma {
    border: none;
    border-collapse: separate;
    border-spacing: 0 !important;
    font-family: "Inter Variable", "Inter", system-ui, sans-serif;
    width: 100%;
    margin: 0 !important;
    padding: 0 !important;
  }

  .gridjs-th-figma {
    background-color: #fafaf9;
    border-bottom: 1px solid #e7e5e4;
    border-left: none !important;
    border-right: none !important;
    border-top: none;
    padding: 12px 16px !important;
    font-size: 16px;
    font-weight: 500;
    line-height: 24px;
    color: rgba(26, 26, 26, 0.7);
    text-align: left;
    height: 52px !important;
    max-height: 52px !important;
    min-height: 52px !important;
    vertical-align: middle;
    position: relative;
    box-shadow: none;
    box-sizing: border-box !important;
  }

  /* Fix inner content in header - but preserve checkbox layout */
  .gridjs-th-figma > div:not([class*="checkbox"]) {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 24px !important;
    height: auto !important;
  }

  /* Centered alignment for checkbox and actions columns (domains table) */
  .gridjs-th-figma:first-child:has(input[type="checkbox"]),
  .gridjs-th-figma:last-child:empty,
  .gridjs-td-figma:first-child:has(input[type="checkbox"]),
  .gridjs-td-figma:last-child:has(button) {
    text-align: center;
  }

  .gridjs-td-figma:first-child,
  .gridjs-td-figma:last-child {
    vertical-align: middle;
    display: table-cell;
    padding: 12px 16px;
  }

  /* Center layout for checkbox column content */
  .gridjs-th-figma:first-child:has(input[type="checkbox"]) div,
  .gridjs-td-figma:first-child:has(input[type="checkbox"]) {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 52px;
    width: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .gridjs-th-content,
  .gridjs-th {
    height: 52px;
    vertical-align: middle;
    display: table-cell;
  }

  .gridjs-td-figma {
    padding: 12px 16px !important;
    border-bottom: 1px solid #e7e5e4;
    border-left: none !important;
    border-right: none !important;
    border-top: none !important;
    height: 52px !important;
    max-height: 52px !important;
    min-height: 52px !important;
    vertical-align: middle;
    font-size: 14px;
    font-weight: 500;
    line-height: 22px;
    color: rgba(26, 26, 26, 0.7);
    background: white;
    box-shadow: none;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    box-sizing: border-box !important;
    text-align: left !important;
  }

  /* Fix inner content height - exclude toggle and checkbox elements */
  .gridjs-td-figma > div:not([class*="toggle"]):not([class*="checkbox"]) {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 22px !important;
    height: auto !important;
  }

  .gridjs-tr {
    height: 52px;
    max-height: 52px;
    min-height: 52px;
  }

  /* Remove all vertical borders between columns */
  .gridjs-th-figma,
  .gridjs-td-figma {
    border-left: none !important;
    border-right: none !important;
  }

  .gridjs-table-figma td,
  .gridjs-table-figma th {
    border-left: none !important;
    border-right: none !important;
  }

  /* Remove top border from first row and bottom border from last row */
  .gridjs-tbody .gridjs-tr:first-child .gridjs-td-figma {
    border-top: none !important;
  }

  .gridjs-tbody .gridjs-tr:last-child .gridjs-td-figma {
    border-bottom: none !important;
  }

  /* Remove top border from header if it exists */
  .gridjs-thead .gridjs-tr:first-child .gridjs-th-figma {
    border-top: none !important;
  }

  .gridjs-tbody .gridjs-tr:hover .gridjs-td-figma {
    background-color: #fafaf9;
  }

  /* Clickable table cells */
  .gridjs-td-clickable {
    cursor: pointer;
  }

  /* Hide default Grid.js pagination */
  .gridjs-pagination {
    display: none !important;
  }

  /* Hide default Grid.js search */
  .gridjs-search {
    display: none !important;
  }

  /* Hide all Grid.js navigation elements */
  .gridjs-pages {
    display: none !important;
  }

  .gridjs-summary {
    display: none !important;
  }

  .gridjs-navigation {
    display: none !important;
  }

  .gridjs-tr .gridjs-pagination {
    display: none !important;
  }

  /* Fix table styling to match Figma */
  .gridjs-container-figma {
    border: 1px solid #e1e1e2 !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    box-shadow: none !important;
    background: transparent !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .gridjs-table-figma {
    border: none !important;
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .gridjs-th-figma:first-child {
    border-top-left-radius: 12px !important;
  }

  .gridjs-th-figma:last-child {
    border-top-right-radius: 12px !important;
  }

  .gridjs-tbody .gridjs-tr:last-child .gridjs-td-figma:first-child {
    border-bottom-left-radius: 12px !important;
  }

  .gridjs-tbody .gridjs-tr:last-child .gridjs-td-figma:last-child {
    border-bottom-right-radius: 12px !important;
  }

  /* Remove any extra rows or spacing */
  .gridjs-footer {
    display: none !important;
    height: 0 !important;
    min-height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -9999px !important;
  }

  /* Hide Grid.js footer completely - multiple approaches */
  .gridjs-footer,
  .gridjs-container .gridjs-footer,
  .gridjs-wrapper .gridjs-footer,
  div.gridjs-footer {
    display: none !important;
    height: 0 !important;
    min-height: 0 !important;
    max-height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -9999px !important;
    top: -9999px !important;
    overflow: hidden !important;
  }

  /* Hide any footer-like elements at the bottom of container */
  .gridjs-container > div:last-child:not(.gridjs-table-figma),
  .gridjs-container > div:last-of-type:not(.gridjs-table-figma),
  .gridjs-wrapper > div:last-child:not(.gridjs-table-figma) {
    display: none !important;
    height: 0 !important;
    overflow: hidden !important;
  }

  /* Hide any element that might contain footer content */
  .gridjs-container
    > *:not(.gridjs-table-figma):not(.gridjs-head):not(.gridjs-tbody) {
    display: none !important;
  }

  /* Additional footer hiding - nuclear option */
  .gridjs-container * {
    /* Hide any element that looks like it might be a footer */
  }

  .gridjs-container > div:not(.gridjs-table-figma) {
    display: none !important;
    height: 0 !important;
    min-height: 0 !important;
    max-height: 0 !important;
    overflow: hidden !important;
    visibility: hidden !important;
  }

  .gridjs-wrapper {
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Fix table container to remove shadows and extra spacing */
  .gridjs-head {
    box-shadow: none !important;
  }

  .gridjs-tbody {
    box-shadow: none !important;
  }

  /* Remove all shadows from table */
  .gridjs-table-figma,
  .gridjs-container-figma,
  .gridjs-wrapper,
  .gridjs-table-figma *,
  .gridjs-container-figma * {
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
    -moz-box-shadow: none !important;
  }

  /* Remove extra border at bottom */
  .gridjs-tbody .gridjs-tr:last-child {
    border-bottom: none !important;
  }

  .gridjs-tbody .gridjs-tr:last-child .gridjs-td-figma {
    border-bottom: none !important;
  }

  /* Remove any container borders */
  .gridjs-container {
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Hide any message or loading containers */
  .gridjs-message {
    display: none !important;
  }

  .gridjs-loading {
    display: none !important;
  }

  /* Only hide specific navigation elements */
  .gridjs-container .gridjs-pagination,
  .gridjs-container .gridjs-summary,
  .gridjs-container .gridjs-pages,
  .gridjs-container .gridjs-navigation {
    display: none !important;
  }

  /* Add margin below custom pagination for dropdown space */
  .gridjs-pagination-figma {
    margin-bottom: 60px !important;
  }

  /* Custom checkbox styling */
  .row-checkbox,
  .header-checkbox {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    position: relative;
  }

  .row-checkbox:checked,
  .header-checkbox:checked {
    background-color: #e4570c !important;
    border-color: #e4570c !important;
  }

  .row-checkbox:checked::after,
  .header-checkbox:checked::after {
    content: "✓";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
  }

  .row-checkbox:hover,
  .header-checkbox:hover {
    border-color: #e4570c !important;
  }

  .row-checkbox:focus,
  .header-checkbox:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(228, 87, 12, 0.2);
  }

  /* Indeterminate state for select-all checkbox */
  .header-checkbox:indeterminate {
    background-color: #e4570c !important;
    border-color: #e4570c !important;
  }

  .header-checkbox:indeterminate::after {
    content: "−";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 14px;
    font-weight: bold;
  }

  /* Custom toggle switch inner circle size and positioning */
  .toggle-switch::after {
    height: 20px !important;
    width: 20px !important;
    top: 2px !important;
  }

  /* Better spacing for checked state - maximum specificity */
  .toggle-switch:has(+ input[type="checkbox"]:checked)::after,
  input[type="checkbox"]:checked ~ .toggle-switch::after,
  .toggle-switch.peer-checked::after {
    transform: translateX(20px) !important;
    margin-left: 0 !important;
    -webkit-transform: translateX(20px) !important;
    -moz-transform: translateX(20px) !important;
    -ms-transform: translateX(20px) !important;
    -o-transform: translateX(20px) !important;
  }

  /* Force override with animation */
  .toggle-switch::after {
    transition: transform 0.2s ease !important;
  }

  /* Custom Range Slider Styles - Orange/Brand Color */
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
  }

  /* Slider Track - Webkit (Chrome, Safari, Edge) */
  input[type="range"]::-webkit-slider-track {
    background: #e7e5e4; /* base-border color */
    height: 8px;
    border-radius: 999px;
  }

  /* Slider Track - Firefox */
  input[type="range"]::-moz-range-track {
    background: #e7e5e4;
    height: 8px;
    border-radius: 999px;
  }

  /* Slider Thumb - Webkit */
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #e4570c; /* state-brand-active */
    border-radius: 50%;
    cursor: pointer;
    margin-top: -6px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    transition: background-color 0.2s ease;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    background: #f67416; /* state-brand-hover */
  }

  /* Slider Thumb - Firefox */
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #e4570c;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    transition: background-color 0.2s ease;
  }

  input[type="range"]::-moz-range-thumb:hover {
    background: #f67416;
  }

  /* Slider filled track effect - Webkit */
  input[type="range"]::-webkit-slider-runnable-track {
    background: linear-gradient(to right, #e4570c 0%, #e4570c var(--range-progress, 0%), #e7e5e4 var(--range-progress, 0%), #e7e5e4 100%);
    height: 8px;
    border-radius: 999px;
  }

  /* Slider filled track effect - Firefox */
  input[type="range"]::-moz-range-progress {
    background: #e4570c;
    height: 8px;
    border-radius: 999px;
  }

  /* Custom dropdown styles */
  .custom-dropdown {
    position: relative;
  }

  .custom-dropdown-trigger {
    cursor: pointer;
    user-select: none;
  }

  .custom-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: white;
    border: 1px solid #e7e5e4;
    border-radius: 12px;
    box-shadow: 0 4px 8px -2px rgba(16, 24, 40, 0.1), 0 2px 4px -2px rgba(16, 24, 40, 0.06);
    z-index: 50;
    max-height: 240px;
    overflow-y: auto;
  }

  .custom-dropdown-item {
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.15s ease;
  }

  .custom-dropdown-item:hover {
    background-color: #f5f5f4;
  }

  .custom-dropdown-item.selected {
    background-color: #fef3f2;
    color: #e4570c;
  }

  /* Table smooth transition / Плавный переход таблицы */
  .gridjs-tbody {
    position: relative;
  }

  .gridjs-tbody.transitioning {
    opacity: 0;
  }

  .gridjs-tbody {
    transition: opacity 0.12s ease-in-out;
  }
}
