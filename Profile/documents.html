<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Документы и акты - FE Платформа</title>
    <link href="../styles.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Header Web Component -->
    <script src="../components/fe-header.js"></script>
    <!-- Profile Menu Web Component -->
    <script src="../components/fe-profile-menu.js"></script>
  </head>
  <body class="bg-base-surface-1 font-sans">
    <!-- Main Container / Главный контейнер -->
    <div class="min-h-screen flex">
      <!-- Sidebar / Боковая панель -->
      <div id="sidebar-container" class="hidden lg:block"></div>

      <!-- Main Content Area / Основная область контента -->
      <div class="flex flex-col grow w-full">
        <!-- Header / Заголовок -->
        <fe-header></fe-header>

        <!-- Page Content / Содержимое страницы -->
        <div
          class="bg-base-surface-1 flex flex-col gap-2.5 grow pt-17 px-6 lg:px-15 w-full lg:pl-[300px]"
        >
          <div class="max-w-[880px] w-full mx-auto">
            <!-- Two Column Layout / Двухколоночный макет -->
            <div class="flex flex-col lg:flex-row gap-9 lg:gap-12 items-start">
              <!-- Left Column - Profile Menu / Левая колонка - Меню профиля -->
              <div class="w-full lg:w-[272px] shrink-0">
                <fe-profile-menu active="documents"></fe-profile-menu>
              </div>

              <!-- Right Column - Documents Content / Правая колонка - Документы -->
              <div class="flex-1 flex flex-col gap-1.5 w-full">
                <!-- Page Title / Заголовок страницы -->
                <h1 class="text-lg-semibold text-text-dark-primary mb-4">
                  История отчетности
                </h1>

                <!-- Tabs and Content Section / Секция вкладок и контента -->
                <div class="flex flex-col gap-7 w-full">
                  <!-- Tabs Navigation / Навигация вкладок -->
                  <div
                    class="flex items-center gap-5 border-b border-base-border"
                  >
                    <button
                      id="tab-acts"
                      class="tab-button active pb-2 border-b-2 border-state-brand-active text-sm-semibold text-text-dark-primary"
                      data-tab="acts"
                    >
                      Акты
                    </button>
                    <button
                      id="tab-documents"
                      class="tab-button pb-2 border-b-2 border-transparent text-sm-medium text-text-dark-secondary hover:text-text-dark-primary transition-colors"
                      data-tab="documents"
                    >
                      Документы
                    </button>
                  </div>

                  <!-- Tab Panel 1: Acts / Панель вкладки 1: Акты -->
                  <div id="panel-acts" class="tab-content flex flex-col gap-6">
                    <!-- Acts list will be rendered here / Список актов будет отрендерен здесь -->
                  </div>

                  <!-- Tab Panel 2: Documents / Панель вкладки 2: Документы -->
                  <div
                    id="panel-documents"
                    class="tab-content hidden flex-col gap-6"
                  >
                    <!-- Documents list will be rendered here / Список документов будет отрендерен здесь -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript / Скрипты -->
    <script>
      // Load Components / Загрузка компонентов
      async function loadComponent(containerId, componentPath) {
        try {
          const response = await fetch(componentPath);
          const html = await response.text();
          document.getElementById(containerId).innerHTML = html;
        } catch (error) {
          console.error(`Error loading component ${componentPath}:`, error);
        }
      }

      // Data arrays / Массивы данных
      const actsData = [
        {
          date: "14 апреля 2025",
          items: [
            {
              id: 1,
              title: "Акт на оплату 1",
              status: "Просмотрен",
              viewed: true,
            },
            {
              id: 2,
              title: "Акт на оплату 2",
              status: "Не просмотрен",
              viewed: false,
            },
          ],
        },
        {
          date: "14 апреля 2025",
          items: [
            {
              id: 3,
              title: "Акт на оплату 3",
              status: "Не просмотрен",
              viewed: false,
            },
            {
              id: 4,
              title: "Акт на оплату 4",
              status: "Не просмотрен",
              viewed: false,
            },
          ],
        },
        {
          date: "13 апреля 2025",
          items: [
            {
              id: 5,
              title: "Акт на оплату 5",
              status: "Просмотрен",
              viewed: true,
            },
            {
              id: 6,
              title: "Акт на оплату 6",
              status: "Просмотрен",
              viewed: true,
            },
          ],
        },
      ];

      const documentsData = [
        {
          date: "14 апреля 2025",
          items: [
            {
              id: 1,
              title: "Договор об оказании услуг № 7919807 от 21.02.2022",
              status: "Не просмотрен",
              viewed: false,
            },
            {
              id: 2,
              title: "Договор об оказании услуг № 7919807 от 21.02.2022",
              status: "Не просмотрен",
              viewed: false,
            },
          ],
        },
        {
          date: "14 апреля 2025",
          items: [
            {
              id: 3,
              title: "Договор об оказании услуг № 7919807 от 21.02.2022",
              status: "Просмотрен",
              viewed: true,
            },
            {
              id: 4,
              title: "Договор об оказании услуг № 7919807 от 21.02.2022",
              status: "Просмотрен",
              viewed: true,
            },
          ],
        },
        {
          date: "13 апреля 2025",
          items: [
            {
              id: 5,
              title: "Договор об оказании услуг № 7919808 от 15.03.2022",
              status: "Просмотрен",
              viewed: true,
            },
          ],
        },
      ];

      // Render functions / Функции рендеринга
      function renderActs() {
        const container = document.getElementById("panel-acts");
        const html = actsData
          .map(
            (group) => `
          <div class="flex flex-col gap-4 w-full">
            <p class="text-sm-medium text-text-dark-secondary">${group.date}</p>
            <div class="flex flex-col gap-4 w-full">
              ${group.items
                .map(
                  (item) => `
                <div class="flex gap-3 items-start w-full">
                  <div class="shrink-0 ">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_359_23998)">
                        <g filter="url(#filter0_di_359_23998)">
                          <path d="M30 40H10C6.68629 40 4 37.3137 4 34V6C4 2.68629 6.68629 0 10 0H20.5147C22.106 0 23.6321 0.632142 24.7574 1.75736L34.2426 11.2426C35.3679 12.3679 36 13.894 36 15.4853V34C36 37.3137 33.3137 40 30 40Z" fill="white"/>
                          <path d="M10 1H20.5146C21.8407 1 23.1121 1.52718 24.0498 2.46484L33.5352 11.9502C34.4728 12.8879 35 14.1593 35 15.4854V34C35 36.7614 32.7614 39 30 39H10C7.23858 39 5 36.7614 5 34V6C5 3.23858 7.23858 1 10 1Z" stroke="#E7E5E4" stroke-width="2"/>
                        </g>
                        <path d="M23 1V9C23 11.2091 24.7909 13 27 13H35" stroke="#E7E5E4" stroke-width="2"/>
                        <g filter="url(#filter1_i_359_23998)">
                          <mask id="path-4-inside-1_359_23998" fill="white">
                            <path d="M0 22C0 19.7909 1.79086 18 4 18H24C26.2091 18 28 19.7909 28 22V30C28 32.2091 26.2091 34 24 34H4C1.79086 34 0 32.2091 0 30V22Z"/>
                          </mask>
                          <path d="M0 22C0 19.7909 1.79086 18 4 18H24C26.2091 18 28 19.7909 28 22V30C28 32.2091 26.2091 34 24 34H4C1.79086 34 0 32.2091 0 30V22Z" fill="#E4570C"/>
                          <path d="M-1 22C-1 19.2386 1.23858 17 4 17H24C26.7614 17 29 19.2386 29 22H27C27 20.3431 25.6569 19 24 19H4C2.34315 19 1 20.3431 1 22H-1ZM28 34H0H28ZM4 34C1.23858 34 -1 31.7614 -1 29V22C-1 19.2386 1.23858 17 4 17V19C2.34315 19 1 20.3431 1 22V30C1 32.2091 2.34315 34 4 34ZM24 17C26.7614 17 29 19.2386 29 22V29C29 31.7614 26.7614 34 24 34C25.6569 34 27 32.2091 27 30V22C27 20.3431 25.6569 19 24 19V17Z" fill="black" fill-opacity="0.08" mask="url(#path-4-inside-1_359_23998)"/>
                          <path d="M3.78906 30V22H6.78906C7.40365 22 7.91927 22.1146 8.33594 22.3437C8.75521 22.5729 9.07161 22.888 9.28516 23.2891C9.5013 23.6875 9.60938 24.1406 9.60938 24.6484C9.60938 25.1615 9.5013 25.6172 9.28516 26.0156C9.06901 26.4141 8.75 26.7279 8.32812 26.957C7.90625 27.1836 7.38672 27.2969 6.76953 27.2969H4.78125V26.1055H6.57422C6.93359 26.1055 7.22786 26.043 7.45703 25.918C7.6862 25.793 7.85547 25.6211 7.96484 25.4023C8.07682 25.1836 8.13281 24.9323 8.13281 24.6484C8.13281 24.3646 8.07682 24.1146 7.96484 23.8984C7.85547 23.6823 7.6849 23.5143 7.45313 23.3945C7.22396 23.2721 6.92839 23.2109 6.56641 23.2109H5.23828V30H3.78906ZM13.7991 30H11.0882V22H13.8538C14.6481 22 15.3304 22.1602 15.9007 22.4805C16.4736 22.7982 16.9137 23.2552 17.221 23.8516C17.5283 24.4479 17.6819 25.1615 17.6819 25.9922C17.6819 26.8255 17.527 27.5417 17.2171 28.1406C16.9098 28.7396 16.4658 29.1992 15.885 29.5195C15.3069 29.8398 14.6116 30 13.7991 30ZM12.5374 28.7461H13.7288C14.2861 28.7461 14.7509 28.6445 15.1233 28.4414C15.4957 28.2357 15.7757 27.9297 15.9632 27.5234C16.1507 27.1146 16.2444 26.6042 16.2444 25.9922C16.2444 25.3802 16.1507 24.8724 15.9632 24.4687C15.7757 24.0625 15.4983 23.7591 15.1311 23.5586C14.7665 23.3555 14.3134 23.2539 13.7718 23.2539H12.5374V28.7461ZM19.2789 30V22H24.4039V23.2148H20.7281V25.3867H24.0523V26.6016H20.7281V30H19.2789Z" fill="white"/>
                        </g>
                      </g>
                      <defs>
                        <filter id="filter0_di_359_23998" x="2" y="-4" width="36" height="47" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="1"/>
                          <feGaussianBlur stdDeviation="1"/>
                          <feComposite in2="hardAlpha" operator="out"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 0.894118 0 0 0 0 0.898039 0 0 0 0 0.905882 0 0 0 0.24 0"/>
                          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_359_23998"/>
                          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_359_23998" result="shape"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="-4"/>
                          <feGaussianBlur stdDeviation="2"/>
                          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 0.813571 0 0 0 0 0.82 0 0 0 0 0.826429 0 0 0 0.32 0"/>
                          <feBlend mode="normal" in2="shape" result="effect2_innerShadow_359_23998"/>
                        </filter>
                        <filter id="filter1_i_359_23998" x="0" y="18" width="28" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                          <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="4"/>
                          <feGaussianBlur stdDeviation="2"/>
                          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.08 0"/>
                          <feBlend mode="normal" in2="shape" result="effect1_innerShadow_359_23998"/>
                        </filter>
                        <clipPath id="clip0_359_23998">
                          <rect width="40" height="40" fill="white"/>
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-0.5 flex-1 min-w-0">
                    <p class="text-sm-medium text-text-dark-primary">${item.title}</p>
                    <p class="text-xs-regular text-text-dark-secondary">${item.status}</p>
                  </div>
                </div>
              `
                )
                .join("")}
            </div>
          </div>
        `
          )
          .join("");

        container.innerHTML = html;
      }

      function renderDocuments() {
        const container = document.getElementById("panel-documents");
        const html = documentsData
          .map(
            (group) => `
          <div class="flex flex-col gap-4 w-full">
            <p class="text-sm-medium text-text-dark-secondary">${group.date}</p>
            <div class="flex flex-col gap-4 w-full">
              ${group.items
                .map(
                  (item) => `
                <div class="flex gap-3 items-start w-full">
                  <div class="shrink-0 ">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_359_23998)">
                        <g filter="url(#filter0_di_359_23998)">
                          <path d="M30 40H10C6.68629 40 4 37.3137 4 34V6C4 2.68629 6.68629 0 10 0H20.5147C22.106 0 23.6321 0.632142 24.7574 1.75736L34.2426 11.2426C35.3679 12.3679 36 13.894 36 15.4853V34C36 37.3137 33.3137 40 30 40Z" fill="white"/>
                          <path d="M10 1H20.5146C21.8407 1 23.1121 1.52718 24.0498 2.46484L33.5352 11.9502C34.4728 12.8879 35 14.1593 35 15.4854V34C35 36.7614 32.7614 39 30 39H10C7.23858 39 5 36.7614 5 34V6C5 3.23858 7.23858 1 10 1Z" stroke="#E7E5E4" stroke-width="2"/>
                        </g>
                        <path d="M23 1V9C23 11.2091 24.7909 13 27 13H35" stroke="#E7E5E4" stroke-width="2"/>
                        <g filter="url(#filter1_i_359_23998)">
                          <mask id="path-4-inside-1_359_23998" fill="white">
                            <path d="M0 22C0 19.7909 1.79086 18 4 18H24C26.2091 18 28 19.7909 28 22V30C28 32.2091 26.2091 34 24 34H4C1.79086 34 0 32.2091 0 30V22Z"/>
                          </mask>
                          <path d="M0 22C0 19.7909 1.79086 18 4 18H24C26.2091 18 28 19.7909 28 22V30C28 32.2091 26.2091 34 24 34H4C1.79086 34 0 32.2091 0 30V22Z" fill="#E4570C"/>
                          <path d="M-1 22C-1 19.2386 1.23858 17 4 17H24C26.7614 17 29 19.2386 29 22H27C27 20.3431 25.6569 19 24 19H4C2.34315 19 1 20.3431 1 22H-1ZM28 34H0H28ZM4 34C1.23858 34 -1 31.7614 -1 29V22C-1 19.2386 1.23858 17 4 17V19C2.34315 19 1 20.3431 1 22V30C1 32.2091 2.34315 34 4 34ZM24 17C26.7614 17 29 19.2386 29 22V29C29 31.7614 26.7614 34 24 34C25.6569 34 27 32.2091 27 30V22C27 20.3431 25.6569 19 24 19V17Z" fill="black" fill-opacity="0.08" mask="url(#path-4-inside-1_359_23998)"/>
                          <path d="M3.78906 30V22H6.78906C7.40365 22 7.91927 22.1146 8.33594 22.3437C8.75521 22.5729 9.07161 22.888 9.28516 23.2891C9.5013 23.6875 9.60938 24.1406 9.60938 24.6484C9.60938 25.1615 9.5013 25.6172 9.28516 26.0156C9.06901 26.4141 8.75 26.7279 8.32812 26.957C7.90625 27.1836 7.38672 27.2969 6.76953 27.2969H4.78125V26.1055H6.57422C6.93359 26.1055 7.22786 26.043 7.45703 25.918C7.6862 25.793 7.85547 25.6211 7.96484 25.4023C8.07682 25.1836 8.13281 24.9323 8.13281 24.6484C8.13281 24.3646 8.07682 24.1146 7.96484 23.8984C7.85547 23.6823 7.6849 23.5143 7.45313 23.3945C7.22396 23.2721 6.92839 23.2109 6.56641 23.2109H5.23828V30H3.78906ZM13.7991 30H11.0882V22H13.8538C14.6481 22 15.3304 22.1602 15.9007 22.4805C16.4736 22.7982 16.9137 23.2552 17.221 23.8516C17.5283 24.4479 17.6819 25.1615 17.6819 25.9922C17.6819 26.8255 17.527 27.5417 17.2171 28.1406C16.9098 28.7396 16.4658 29.1992 15.885 29.5195C15.3069 29.8398 14.6116 30 13.7991 30ZM12.5374 28.7461H13.7288C14.2861 28.7461 14.7509 28.6445 15.1233 28.4414C15.4957 28.2357 15.7757 27.9297 15.9632 27.5234C16.1507 27.1146 16.2444 26.6042 16.2444 25.9922C16.2444 25.3802 16.1507 24.8724 15.9632 24.4687C15.7757 24.0625 15.4983 23.7591 15.1311 23.5586C14.7665 23.3555 14.3134 23.2539 13.7718 23.2539H12.5374V28.7461ZM19.2789 30V22H24.4039V23.2148H20.7281V25.3867H24.0523V26.6016H20.7281V30H19.2789Z" fill="white"/>
                        </g>
                      </g>
                      <defs>
                        <filter id="filter0_di_359_23998" x="2" y="-4" width="36" height="47" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="1"/>
                          <feGaussianBlur stdDeviation="1"/>
                          <feComposite in2="hardAlpha" operator="out"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 0.894118 0 0 0 0 0.898039 0 0 0 0 0.905882 0 0 0 0.24 0"/>
                          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_359_23998"/>
                          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_359_23998" result="shape"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="-4"/>
                          <feGaussianBlur stdDeviation="2"/>
                          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 0.813571 0 0 0 0 0.82 0 0 0 0 0.826429 0 0 0 0.32 0"/>
                          <feBlend mode="normal" in2="shape" result="effect2_innerShadow_359_23998"/>
                        </filter>
                        <filter id="filter1_i_359_23998" x="0" y="18" width="28" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                          <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
                          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                          <feOffset dy="4"/>
                          <feGaussianBlur stdDeviation="2"/>
                          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
                          <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.08 0"/>
                          <feBlend mode="normal" in2="shape" result="effect1_innerShadow_359_23998"/>
                        </filter>
                        <clipPath id="clip0_359_23998">
                          <rect width="40" height="40" fill="white"/>
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-0.5 flex-1 min-w-0">
                    <p class="text-sm-medium text-text-dark-primary break-words">${item.title}</p>
                    <p class="text-xs-regular text-text-dark-secondary">${item.status}</p>
                  </div>
                </div>
              `
                )
                .join("")}
            </div>
          </div>
        `
          )
          .join("");

        container.innerHTML = html;
      }

      // Tabs functionality / Функционал вкладок
      function initTabs() {
        const tabButtons = document.querySelectorAll(".tab-button");
        const actsTab = document.getElementById("panel-acts");
        const documentsTab = document.getElementById("panel-documents");

        tabButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const tabName = button.dataset.tab;

            // Update button states
            tabButtons.forEach((btn) => {
              btn.classList.remove(
                "active",
                "border-state-brand-active",
                "text-text-dark-primary",
                "text-sm-semibold"
              );
              btn.classList.add(
                "border-transparent",
                "text-text-dark-secondary",
                "text-sm-medium"
              );
            });

            button.classList.add(
              "active",
              "border-state-brand-active",
              "text-text-dark-primary",
              "text-sm-semibold"
            );
            button.classList.remove(
              "border-transparent",
              "text-text-dark-secondary",
              "text-sm-medium"
            );

            // Show/hide tabs
            if (tabName === "acts") {
              actsTab.classList.remove("hidden");
              actsTab.classList.add("flex");
              documentsTab.classList.add("hidden");
              documentsTab.classList.remove("flex");
            } else if (tabName === "documents") {
              documentsTab.classList.remove("hidden");
              documentsTab.classList.add("flex");
              actsTab.classList.add("hidden");
              actsTab.classList.remove("flex");
            }
          });
        });
      }

      // Initialize Components / Инициализация компонентов
      document.addEventListener("DOMContentLoaded", async function () {
        await loadComponent("sidebar-container", "../components/sidebar.html");

        // Render data / Рендеринг данных
        renderActs();
        renderDocuments();

        // Initialize tabs / Инициализация вкладок
        initTabs();

        // Listen for logout event from profile menu
        document.addEventListener("profile-logout", function () {
          console.log("User logged out");
          // Redirect to login page or perform logout
          // window.location.href = '/login.html';
        });
      });
    </script>
  </body>
</html>
