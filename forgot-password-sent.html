<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Восстановление пароля - FE Платформа</title>
    <link href="./styles.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-base-surface-1 font-sans">
    <!-- Main Container / Главный контейнер -->
    <div class="min-h-screen flex">
      <!-- Left Column - Promotional Content / Левая колонка - промо контент -->
      <div
        class="hidden lg:flex lg:w-1/2 bg-base-surface-2 p-16 flex-col justify-between"
      >
        <!-- Logo / Логотип -->
        <div class="flex items-center">
          <img
            src="public/images/fe-logo.png"
            alt="FE ПЛАТФОРМА"
            class="h-4 w-auto"
          />
        </div>

        <!-- Hero Image / Главное изображение -->
        <div
          class="flex-1 flex items-center justify-center relative overflow-hidden"
        >
          <div class="w-[560px] h-[560px] relative">
            <img
              src="public/images/registration-bg.png"
              alt="Серверы"
              class="w-full h-full object-cover"
            />
          </div>
        </div>

        <!-- Features List / Список преимуществ -->
        <div class="space-y-4">
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 pt-0.5">
              <img
                src="public/icons/checkmark-circle-04.svg"
                alt="✓"
                class="w-6 h-6"
              />
            </div>
            <p class="text-lg-medium text-text-dark-primary">
              Бесплатный хостинг при регистрации домена
            </p>
          </div>
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 pt-0.5">
              <img
                src="public/icons/checkmark-circle-04.svg"
                alt="✓"
                class="w-6 h-6"
              />
            </div>
            <p class="text-lg-medium text-text-dark-primary">
              100+ вариантов кастомизации VPS серверов
            </p>
          </div>
          <div class="flex items-start space-x-4">
            <div class="flex-shrink-0 pt-0.5">
              <img
                src="public/icons/checkmark-circle-04.svg"
                alt="✓"
                class="w-6 h-6"
              />
            </div>
            <p class="text-lg-medium text-text-dark-primary">
              Быстрая регистрация домена
            </p>
          </div>
        </div>
      </div>

      <!-- Right Column - Password reset sent / Правая колонка - письмо отправлено -->
      <div class="w-full lg:w-1/2 flex flex-col lg:border-l border-base-border">
        <!-- Header with Registration Button / Хедер с кнопкой регистрации -->
        <div class="flex justify-end p-11">
          <a
            href="registration.html"
            class="btn-secondary px-4 py-2 text-base-semibold text-text-dark-primary bg-base-surface-2 border border-base-border rounded-8"
          >
            Зарегистрироваться
          </a>
        </div>

        <!-- Content / Основной контент -->
        <div class="flex-1 flex items-center justify-center px-8 lg:px-16">
          <div class="w-full max-w-[412px] space-y-8">
            <!-- Title / Заголовок -->
            <div class="text-left">
              <h1 class="text-3xl-bold text-text-dark-primary">
                Восстановление пароля
              </h1>
            </div>

            <!-- Info text / Информационный текст -->
            <div class="space-y-4">
              <p class="text-lg-regular text-text-dark-secondary">
                Отправили на
                <span id="emailValue" class="text-text-dark-primary font-medium"
                  >test@gmail.com</span
                >
                новый пароль для входа в систему
              </p>

              <div class="space-y-2">
                <p class="text-lg-regular text-text-dark-secondary">
                  Не получили письмо?
                </p>
                <p
                  id="countdownText"
                  class="text-lg-regular text-text-dark-secondary"
                >
                  Можно отправить заново через
                  <span
                    id="countdownValue"
                    class="font-semibold text-text-dark-primary"
                    >15 сек</span
                  >
                </p>
                <div
                  id="countdownLive"
                  class="sr-only"
                  aria-live="polite"
                ></div>
              </div>
            </div>

            <!-- Resend Button / Кнопка повторной отправки -->
            <button
              id="resendBtn"
              type="button"
              class="w-full h-14 px-6 rounded-8 bg-base-surface-2 text-base-semibold text-text-dark-tertiary opacity-70 cursor-not-allowed"
              disabled
            >
              Отправить еще раз
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript / Скрипты -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const RESEND_SECONDS = 15;

        const emailEl = document.getElementById("emailValue");
        const countdownTextEl = document.getElementById("countdownText");
        const countdownLiveEl = document.getElementById("countdownLive");
        const resendBtn = document.getElementById("resendBtn");

        function getCountdownValueEl() {
          return document.getElementById("countdownValue");
        }

        // Email from querystring if provided
        const params = new URLSearchParams(window.location.search);
        const email = params.get("email") || "test@gmail.com";
        emailEl.textContent = email;

        let timerId = null;
        let remaining = RESEND_SECONDS;

        function formatSeconds(sec) {
          return sec + " сек";
        }

        function setResendEnabled(enabled) {
          if (enabled) {
            resendBtn.disabled = false;
            resendBtn.classList.remove(
              "bg-base-surface-2",
              "text-text-dark-tertiary",
              "opacity-70",
              "cursor-not-allowed"
            );
            resendBtn.classList.add(
              "bg-state-brand-active",
              "text-text-light-primary",
              "hover:bg-state-brand-hover",
              "transition-colors"
            );
            countdownTextEl.textContent = "Можно отправить заново";
          } else {
            resendBtn.disabled = true;
            resendBtn.classList.add(
              "bg-base-surface-2",
              "text-text-dark-tertiary",
              "opacity-70",
              "cursor-not-allowed"
            );
            resendBtn.classList.remove(
              "bg-state-brand-active",
              "text-text-light-primary",
              "hover:bg-state-brand-hover"
            );
            countdownTextEl.innerHTML =
              'Можно отправить заново через <span id="countdownValue" class="font-semibold text-text-dark-primary"></span>';
          }
        }

        function updateCountdownUI(sec) {
          const valEl = getCountdownValueEl();
          if (valEl) {
            valEl.textContent = formatSeconds(sec);
          }
          countdownLiveEl.textContent = "Осталось " + formatSeconds(sec);
        }

        function startCountdown(sec) {
          remaining = sec;
          setResendEnabled(false);
          updateCountdownUI(remaining);
          if (timerId) clearInterval(timerId);
          timerId = setInterval(() => {
            remaining -= 1;
            if (remaining <= 0) {
              clearInterval(timerId);
              timerId = null;
              setResendEnabled(true);
            } else {
              updateCountdownUI(remaining);
            }
          }, 1000);
        }

        resendBtn.addEventListener("click", function () {
          console.log("Resend recovery email to:", email);
          alert("Письмо повторно отправлено на " + email);
          startCountdown(RESEND_SECONDS);
        });

        startCountdown(RESEND_SECONDS);
      });
    </script>
  </body>
</html>
